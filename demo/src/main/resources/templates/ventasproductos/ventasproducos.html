<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/ventas.css}">
    <title>LuxeStore - Tienda Premium</title>>
</head>
<body>
    <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="brand">LuxeStore</div>
            <ul class="nav-menu">
                <li><a th:href="@{/admin/admin}">pagina principal</a></li>
                <li><a th:href="@{/admin/product/add}">crear producto</a></li>
                <li><a th:href="@{/admin/marcas}">crear marca</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <h1 class="page-title">Ventas de productos</h1>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Metodo de pago</th>
                        <th>Cantidad</th>
                        <th>Total</th>
                        <th>Acción</th>
                    </tr>
                </thead>
                <tbody>
                    <tr  th:each="item : ${ventas}">
                        <td th:text="${#temporals.format(item.fecha, 'dd/MM/yyyy')}">15/08/2024</td>
                        <td class="product-name">Tarjeta</td>
                        <td th:text="${#aggregates.sum(item.detallesVenta.![cantidad])+' Unidades'}">25 unidades</td>
                        <td class="price" th:text="'$ '+${item.total}" >$29,999.00</td>
                        <td>
                            <form action="/admin/reporte/inline" method="get" >
                                <input type="hidden" name="id" th:value="${item.id}">
                                <button type="submit"class="btn-details">ver detalles</button>
                            </form>
          
                        </td>
                    </tr>
                </tbody>
                <tr></tr>
                <tr></tr>
                    <!-- Pagination -->
                <div class="pagination-container">
                    <nav aria-label="Page navigation example">
                        <ul class="pagination justify-content-center" >
                            <li class="page-item" th:each="pageNumber : ${pageNumbers}">
                                <a class="page-link" th:href="@{|/admin/ventasproductos?page=${pageNumber}|}" th:text="${pageNumber}"></a>
                            </li>
                            </ul>

                    </nav>
                </div>
            </table>
        </div>
    </main>
    <style>.pagination {
    list-style: none;
    padding-left: 0;
    display: flex;
    justify-content: center;
    gap: 5px;
}

.pagination li {
    list-style: none;
}

.page-link {
    display: block;
    padding: 0.375rem 0.75rem;
    color: #0d6efd;
    text-decoration: none;
    background-color: #fff;
    border: 1px solid #dee2e6;
    border-radius: 0.25rem;
}

.page-link:hover {
    color: #0a58ca;
    background-color: #e9ecef;
    border-color: #dee2e6;
}

#detailModal #detailImagen {
    width: 100%;
    text-align: center;
    margin: 15px 0;
    padding: 10px;
    background-color: #f8f9fa;
    border-radius: 8px;
}

#detailModal #detailImagen img {
    width: 100%;
    max-width: 300px;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin: 0 auto;
    display: block;
}</style>

    <!-- Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Detalles del Producto</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="detail-item">
                    <span class="detail-label">Producto</span>
                    <span class="detail-value" id="modalProduct"></span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Marca</span>
                    <span class="detail-value" id="modalBrand"></span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Fecha de Ingreso</span>
                    <span class="detail-value" id="modalDate"></span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Stock Disponible</span>
                    <span class="detail-value" id="modalQuantity"></span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Especificaciones</span>
                    <span class="detail-value" id="modalSpecs"></span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Descripción</span>
                    <span class="detail-value" id="modalDescription"></span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Precio Total</span>
                    <span class="detail-value price-highlight" id="modalPrice"></span>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showDetails(product, date, quantity, price, description, brand, specs) {
            document.getElementById('modalProduct').textContent = product;
            document.getElementById('modalDate').textContent = date;
            document.getElementById('modalQuantity').textContent = quantity + ' unidades';
            document.getElementById('modalPrice').textContent = price;
            document.getElementById('modalDescription').textContent = description;
            document.getElementById('modalBrand').textContent = brand;
            document.getElementById('modalSpecs').textContent = specs;
            
            const modal = document.getElementById('productModal');
            modal.style.display = 'block';
            
            // Animar elementos del modal
            const detailItems = document.querySelectorAll('.detail-item');
            detailItems.forEach((item, index) => {
                item.style.animationDelay = `${index * 0.1}s`;
            });
            
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modal = document.getElementById('productModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Cerrar modal al hacer click fuera
        window.onclick = function(event) {
            const modal = document.getElementById('productModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Cerrar modal con ESC
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });

        // Efecto parallax sutil en scroll
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const shapes = document.querySelectorAll('.shape');
            shapes.forEach((shape, index) => {
                const speed = 0.5 + (index * 0.1);
                shape.style.transform = `translateY(${scrolled * speed}px) rotate(${scrolled * 0.1}deg)`;
            });
        });
    </script>
</body>
</html>